[gd_scene load_steps=7 format=3]

[ext_resource type="Script" path="res://Script/Base/BaseMonster.gd" id="1"]

[sub_resource type="SpriteFrames" id="1"]
animations = [{
"frames": [],
"loop": true,
"name": &"\"\"",
"speed": 5.0
}]
script = null

[sub_resource type="CircleShape2D" id="2"]
radius = 3.16228
script = null

[sub_resource type="CircleShape2D" id="3"]
script = null

[sub_resource type="CircleShape2D" id="4"]
radius = 53.7587
script = null

[sub_resource type="GDScript" id="5"]
script/source = "extends Node
#var Poision
#var BuffInfo = {}
#func _physics_process(delta: float) -> void:
#	print(GetPoisionInfo(\"poision\")[1])
#	if Poision == null and GetPoisionInfo(\"poision\")[0]:
#		Poision = Global.AddBuffIcon(get_parent().MyBlood.buff_list,GetPoisionInfo(\"poision\")[1])
#
#
#
#func GetPoisionInfo(Name):
#	var HaveBuff: bool = false
#	var List = {}
#	List =  {\"Name\": Name,\"value\": 0.0,\"AddTime\": 0.0,\"ReduceInterval\": 0.0,\"AttackKind\": \"\",\"AddCount\": 1}
#	for i in get_children():
#		if i != null:
#			if i.BuffInfo[\"Name\"] == Name:
#				HaveBuff = true
#				List[\"AddCount\"] += 1
#				List[\"value\"] += i.BuffInfo[\"value\"]
##				if i.BuffInfo[\"AddTime\"] >= List[\"AddTime\"]:
##					List[\"AddTime\"] = i.BuffInfo[\"AddTime\"]
#
#	return [HaveBuff,List]
"

[node name="BaseMonster" type="CharacterBody2D"]
collision_layer = 4
collision_mask = 33
script = ExtResource( "1" )

[node name="Bullet" type="Node" parent="."]

[node name="MonsterDir" type="Node2D" parent="."]

[node name="mr_ani" type="AnimatedSprite2D" parent="MonsterDir"]
texture_filter = 2
sprite_frames = SubResource( "1" )
animation = &"\"\""

[node name="mr_player" type="AnimationPlayer" parent="."]

[node name="BaseDamageBox" type="Node2D" parent="."]

[node name="HitBox" type="Area2D" parent="BaseDamageBox"]
collision_layer = 4
collision_mask = 0

[node name="HitBox" type="CollisionShape2D" parent="BaseDamageBox/HitBox"]
shape = SubResource( "2" )

[node name="HurtBox" type="Area2D" parent="BaseDamageBox"]
collision_layer = 1024
collision_mask = 2

[node name="HurtBox" type="CollisionShape2D" parent="BaseDamageBox/HurtBox"]
shape = SubResource( "3" )

[node name="pz" type="CollisionShape2D" parent="."]
position = Vector2(-2, 11)
shape = SubResource( "4" )

[node name="CD_REMOVE" type="Timer" parent="."]
autostart = true

[node name="damage_text" type="Node2D" parent="."]

[node name="change_state" type="Timer" parent="."]
wait_time = 2.0
autostart = true

[node name="spontaneous_recovery" type="Timer" parent="."]
wait_time = 2.0
autostart = true

[node name="Buff" type="Node" parent="."]
script = SubResource( "5" )

[node name="CalmHit" type="Timer" parent="."]

[node name="RemoveHurtBL" type="Timer" parent="."]
one_shot = true

[connection signal="area_entered" from="BaseDamageBox/HitBox" to="." method="_on_hit_box_area_entered" flags=18]
[connection signal="area_exited" from="BaseDamageBox/HitBox" to="." method="_on_hit_box_area_exited" flags=18]
[connection signal="area_entered" from="BaseDamageBox/HurtBox" to="." method="_on_hurt_box_area_entered" flags=18]
[connection signal="timeout" from="CD_REMOVE" to="." method="_on_cd_remove_timeout" flags=18]
[connection signal="timeout" from="change_state" to="." method="_on_change_state_timeout" flags=18]
[connection signal="timeout" from="spontaneous_recovery" to="." method="_on_spontaneous_recovery_timeout" flags=18]
[connection signal="timeout" from="CalmHit" to="." method="_on_calm_hit_timeout" flags=18]
[connection signal="timeout" from="RemoveHurtBL" to="." method="_on_remove_hurt_bl_timeout" flags=18]
